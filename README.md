# Система управления библиотекой

Документация по основным компонентам приложения:

 - [Хранение данных](src/database/README.md)
 - [Устройство поиска](src/utils/search_engine/README.md)
 - [Менеджмент команд](src/commands/README.md)
 - [Постраничное отображение результатов](src/utils/paginator/README.md)

## Описание

Это консольное приложение предназначено для управления библиотекой книг. Оно позволяет добавлять, удалять, искать и отображать книги. Каждая книга имеет уникальный идентификатор, название, автора, год издания и статус (в наличии или выдана).

## Функциональные возможности

- **Добавление книги**: Ввод данных о книге (название, автор, год) и автоматическое присвоение уникального ID и статуса "в наличии".
- **Удаление книги**: Удаление книги по её ID.
- **Поиск книги**: Поиск книг по названию, автору или году издания.
- **Отображение всех книг**: Вывод списка всех книг с их данными.
- **Изменение статуса книги**: Изменение статуса книги на "в наличии" или "выдана".

## Требования

- Python 3.10 или выше.

## Установка

1. **Клонирование репозитория**:
   ```bash
   git clone https://github.com/web-mc/test-book-library.git
   cd test-book-library
   ```

2. **Подготовка окружения**:
   Приложение автоматически при запуске создаёт необходимые директории и файлы, если их нет.

## Использование

- **Запуск приложения**: Выполните команду `python main.py` для запуска консольного приложения.
- **Команды**: Следуйте инструкциям на экране для выполнения различных команд.
  - Введите номер соответствующей команды.
  - Следуйте подсказкам для ввода необходимой информации (например, название книги, автор).

## Внутреннее устройство

### Структура папок

- **`main.py`**: Точка входа в приложение. Инициализирует окружение и обрабатывает ввод пользователя.
- **`src/config`**: Указаны параметры приложения и логирования.
- **`src/data/books.json`**: Файл, который используется как база данных.
- **`src/database/json_db.py`**: Обрабатывает хранение и извлечение данных с использованием JSON-файла.
- **`src/commands`**: Содержит модули для каждой команды (например, добавление, удаление).
  - **`command_handler.py`**: Управляет регистрацией и выполнением команд.
  - **`add_book.py`**: Реализует добавление книги.
  - **`delete.py`**: Реализует удаление книги.
  - **`search_book.py`**: Реализует поиск книги.
  - **`change_status.py`**: Реализует изменение статуса книги.
- **`src/utils`**: Утилиты для обработки ввода, отображения и поиска.
- **`src/logs`**: Находятся файлы для логирования ошибок и простых сообщений.
- **`fake_json_db_generator.py`**: Генерирует фейковые книги и создает новый `books.json`. Сделан для облегчения тестирования поиска книг.

## Логика работы

- **Хранение данных**: Книги хранятся в JSON-файле, указанном в конфигурации.
- **Выполнение команд**: Команды выполняются через класс `CommandHandler`, который взаимодействует с классом `JsonDB` для операций с данными.
- **Обработка ошибок**: При возникновении ошибки, приложение сообщает об этом пользователю, а в `error.log` пишутся подробности ошибки.

## Расширение

Для работы с различными базами данных, необходимо создать новый класс, который будет наследоваться от абстрактного класса `Database`. Этот подход позволяет легко интегрировать новые типы баз данных.

Добавление команд происходит путем добавления новых функций в папку **`src/commands`** с последующей регистрацией в файле **`src/commands/command_handler.py`** в функции **`init_handler`**.
